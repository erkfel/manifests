launch:
    parameters:
        - instnaceSize:
            description: Instnace size
            default: "m1.small"
            enum:
                "m1.small": "m1.small"
    steps:
        - node-provision:
            action: compute.grow
            parameters:
                ec2SecurityGroup: atg
                hardwareId: $instnaceSize
            output:
                host: ips
        - command:
            action: execrun
            parameters:
                phase: execute
                roles: ["defaultRole"]
                precedingPhases: [provision]
                command:
                     - ls -la
            output:
                stdout: stdout
                stderr: stderr
    return:
        - stdout:
            description: Stdout
            value: ${stdout}
        - stderr:
            description: Stderr
            value: ${stderr}

arbitraryCommand:
    parameters:
        - command:
            description: Comamnd
    steps:
        - command:
            action: execrun
            parameters:
                phase: execute
                roles: ["defaultRole"]
                precedingPhases: [provision]
                command:
                     - $command
            output:
                stdout: stdout
                stderr: stderr
    return:
        - stdout:
            description: Stdout
            value: ${stdout}
        - stderr:
            description: Stderr
            value: ${stderr}


destroy:
  steps:
    - undeployEnv:
        action: "undeployEnv"
        parameters:
          phase: "destroy"
